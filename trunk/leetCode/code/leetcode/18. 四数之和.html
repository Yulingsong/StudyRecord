<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
给定一个包含 n 个整数的数组 nums 和一个目标值 target，判断 nums 中是否存在四个元素 a，b，c 和 d ，使得 a + b + c + d 的值与 target 相等？找出所有满足条件且不重复的四元组。

注意：

答案中不可以包含重复的四元组。

示例：

给定数组 nums = [1, 0, -1, 0, -2, 2]，和 target = 0。

满足要求的四元组集合为：
[
[-1,  0, 0, 1],
[-2, -1, 1, 2],
[-2,  0, 0, 2]
]

<script>
    let nums = [1, 0, -1, 0, -2, 2];
    let nums2 = [0,0,0,0];
    let nums3 = [-1,0,1,2,-1,-4];
    let nums4 = [-3,-2,-1,0,0,1,2,3];
    let nums5 = [1,-2,-5,-4,-3,3,3,5];
    let target = -11;



    // var fourSum = function(nums, target){
    //     nums = nums.sort((a,b)=>{return a-b});
    //     let arr = [];
    //     if(!nums || nums.length<4)return arr;
    //     for(let i = 0; i < nums.length-3;i++){
    //         if(nums[i] > Math.abs(target) || nums[i] === nums[i-1])continue;
    //         for(let j = i + 1; j < nums.length-2;j++){
    //             if(nums[j] === nums[j-1] && (j-1) !== i)continue;
    //             let sum = target - nums[i] - nums[j];
    //             let left = j+1,right = nums.length-1;
    //             while(left < right){
    //                 if(nums[left]+nums[right]>sum){
    //                     do{--right}while(nums[right]===nums[right+1])
    //                 }else if(nums[left]+nums[right] < sum){
    //                     do{++left}while(nums[left]===nums[left-1]);
    //                 }else{
    //                     let newArr = [nums[i],nums[j],nums[left],nums[right]];
    //                     arr.push(newArr);
    //                     do{--right}while(nums[right]===nums[right+1]);
    //                     do{++left}while(nums[left]===nums[left-1])
    //                 }
    //             }
    //         }
    //     }
    //     return arr;
    // };

    var fourSum = function(nums, target){
        nums = nums.sort((a,b)=>{return a-b});
        let arr = [],n = nums.length;
        if(!nums || nums.length<4)return arr;
        for(let i = 0; i < nums.length-3;i++){
            if(nums[i] > Math.abs(target) || nums[i] === nums[i-1])continue;

            let target1 = target - nums[i];
            if (nums[i + 1] + nums[i + 2] + nums[i + 3] > target1) break;
            if (nums[n - 3] + nums[n - 2] + nums[n - 1] < target1) continue;

            for(let j = i + 1; j < nums.length-2;j++){
                if(nums[j] === nums[j-1] && j>i+1)continue;

                let sum = target1 - nums[j];
                if (nums[j + 1] + nums[j + 2] > sum) break;
                if (nums[n - 2] + nums[n - 1 < sum]) continue;

                let left = j+1,right = nums.length-1;
                while(left < right){
                    if(nums[left]+nums[right]>sum){
                        do{--right}while(nums[right]===nums[right+1])
                    }else if(nums[left]+nums[right] < sum){
                        do{++left}while(nums[left]===nums[left-1]);
                    }else{
                        let newArr = [nums[i],nums[j],nums[left],nums[right]];
                        arr.push(newArr);
                        do{--right}while(nums[right]===nums[right+1]);
                        do{++left}while(nums[left]===nums[left-1])
                    }
                }
            }
        }
        return arr;
    };

    // console.log(fourSum(nums, target));
    // console.log(fourSum(nums2, target));
    // console.log(fourSum(nums3, target));
    // console.log(fourSum(nums4, target));
    console.log(fourSum(nums5, target));









</script>
</body>
</html>

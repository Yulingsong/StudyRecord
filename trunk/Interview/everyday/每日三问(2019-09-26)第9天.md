#####学习github上 [fe-interview](https://github.com/haizlin/fe-interview)，每日三问，慢慢积累。



## 一：浏览器内多个标签页之间的通信方式有哪些？

### 传递方式：

####1.WebSocket（可跨域）

####2.postMessage（可跨域）

window.postMessage()方法安全地启用Window对象之间的跨源通信。

对将接收消息的窗口的引用，获得此类引用的方法包括：

- iframe标签

- Window.open （生成一个新窗口然后引用它） 

- Window.opener （引用产生这个的窗口） 

- Worker打开的页面 

####3.SharedWorker

1.先说一下webworker，作为浏览器的一个新特性，可以提供一个额外的线程来执行一些js代码（真正的多线程），并且不会影响到浏览器用户界面，但是不能DOM操作。

2.SharedWorker可以被多个window共同使用，所以可以用来跨页面传输数据，但必须保证这些标签页都是同源的(相同的协议，主机和端口号)。

####4.Server-sent Events

HTML5 服务器发送事件（server-sent event）允许网页获得来自服务器的更新。
Server-Sent 事件指的是网页自动获取来自服务器的更新。
以前也可能做到这一点，前提是网页不得不询问是否有可用的更新。通过服务器发送事件，更新能够自动到达。

**服务端**事件流的对应MIME格式为text/event-stream，而且其基于HTTP长连接。针对HTTP1.1规范默认采用长连接，针对HTTP1.0的服务器需要特殊设置。

####5.localStorage（可以添加事件监听）

localstorage是浏览器多个标签共用的存储空间，所以可以用来实现多标签之间的通信(ps：session是会话级的存储空间，每个标签页都是单独的）。 直接在window对象上添加监听即可。

####6.BroadcaseChannel IE不支持

这个方式，只要是在同一原始域和用户代理下，所有窗口、iframe之间都可以进行交互。这个感觉就有点类似于广播了。

####7.Cookkies

Cookies在同一个域名内，并且目录也得相同，可以参考第三方库

[参考网页消息通信连接](https://xv700.gitee.io/message-communication-for-web/)



## 二：简述下你理解的优雅降级和渐进增强

###一：概念

- 渐进增强(Progressive Enhancement)

先针对低版本的浏览器进行构建页面，保证最基本的功能，然后在针对高级浏览器进行效果，交互等改进和追加功能达到更好的用户体验。

- 优雅降级(Graceful Degradation)

一开始就针对高版本的浏览器构建完整的功能，然后在针对低版本的浏览器进行兼容。

###二：渐进增强和优雅降级的观点

- 渐进增强的观点：
      渐进增强的观点认为应关注内容本身。内容是我们建立网站的诱因。有的网站展示它，有的寻求，有的操作，还有的网站甚至会包含以上的种种，但相同点是他们全都涉及到内容。这使得渐进增强成为一种更为合理的实际范例。这也是它立即被Yahoo!所采纳并用以构建其“分级式浏览器支持（Geaded Browser Support）”策略的原因所在。

- 优雅降级的观点：

  ​	优雅降级观点则认为针对那些最高级，最完善的浏览器来设计网站。而将那些被认为“过时”或有功能缺失的浏览器下的测试工作安排在开发周期的最后阶段，并把测试对象限定为主流浏览器（如IE Mozilla等）的前一个版本。在这种设计范例下，旧版本的浏览器被认为仅能提供“简陋却无妨的浏览器体验”。你可以做一些小的调整来适应某个特定的浏览器。但由于他们并非我们所关注的焦点，因此除了修复较大的错误之外，其他的差异将被直接忽略。

###三.渐进增强和优雅降级的区别

​    优雅降级是从复杂的现状开始，并试图减少用户体验的供给，而渐进增强则是从一个非常基础的，能够起作用的版本开始，并不断地扩充，以适应未来环境的需要。降级（功能衰减）意味着往回看；而渐进增强则意味着朝前看，同时保证其根基处于安全地带。

​    

## 三：写一个判断数据类型的方法

```js
function type (obj) {
	return Object.prototype.toString.call(obj).replace(/\[object\s|\]/g,'');
}

console.log(type([]))  //"Array"
console.log(type(1))  //"Number"
```

